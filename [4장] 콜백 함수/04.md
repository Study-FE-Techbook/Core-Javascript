# [4ì¥] ì½œë°± í•¨ìˆ˜

## 1. ì½œë°± í•¨ìˆ˜ë€?

- ì½œë°±í•¨ìˆ˜: ë‹¤ë¥¸ ì½”ë“œì˜ ì¸ìë¡œ ë„˜ê²¨ì£¼ëŠ” í•¨ìˆ˜
- ì½œë°±í•¨ìˆ˜ëŠ” ì œì–´ê¶Œê³¼ ê´€ë ¨ì´ ê¹ŠìŒ
- ì–´ë–¤ í•¨ìˆ˜ Xë¥¼ í˜¸ì¶œí•˜ë©´ì„œ íŠ¹ì • ì¡°ê±´ì¼ ë•Œ í•¨ìˆ˜ Yë¥¼ ì‹¤í–‰í•´ì„œ ë‚˜ì—ê²Œ ì•Œë ¤ë‹¬ë¼ëŠ” ìš”ì²­ì„ ë³´ë‚´ëŠ” ê²ƒì„.

## 2. ì œì–´ê¶Œ

**ğŸ“í˜¸ì¶œì‹œì **

> â“**ì œì–´ê¶Œ** <br>
> ì‹¤í–‰íë¦„ or í”„ë¡œì„¸ìŠ¤

```jsx
var count = 0

var cbFunc = function () {
  console.log(count)
  if (++count > 4) clearInterval(timer)
}
var timer = setInterval(cbFunc, 300)

// ì‹¤í–‰ ê²°ê³¼
// 0 (0.3ì´ˆ)
// 1 (0.6ì´ˆ)
// 0 (0.9ì´ˆ)
// 1 (1.2ì´ˆ)
// 0 (1.5ì´ˆ)
```

| code                     | í˜¸ì¶œ ì£¼ì²´   | ì œì–´ê¶Œ      |
| ------------------------ | ----------- | ----------- |
| cbFunc()                 | ì‚¬ìš©ì      | ì‚¬ìš©ì      |
| setInterval(cbFunc, 300) | setInterval | setInterval |

**ğŸ“ì¸ì**

map ë©”ì„œë“œëŠ” ì²« ë²ˆì§¸ ì¸ìë¡œ callbackí•¨ìˆ˜ë¥¼ ë°›ê³ , ìƒëµ ê°€ëŠ¥í•œ ë‘ ë²ˆì§¸ ì¸ìë¡œ ì½œë°±í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ thisë¡œ ì¸ì‹í•  ëŒ€ìƒì„ íŠ¹ì •í•  ìˆ˜ ìˆë‹¤.

```jsx
const numbers = [1, 2, 3]

numbers.map(function (currentValue, index) {
  console.log(`Index ${index}: ${currentValue}`)
})

// Index 0: 1
// Index 1: 2
// Index 2: 3
```

```jsx
// ì˜ˆì‹œ ë°°ì—´
const numbers = [1, 2, 3, 4, 5]

// map ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ê° ìš”ì†Œë¥¼ ì œê³±í•œ ìƒˆë¡œìš´ ë°°ì—´ì„ ìƒì„±í•˜ëŠ” ì˜ˆì‹œ
const squaredNumbers = numbers.map(function (currentValue, index, array) {
  console.log(
    `Current Value: ${currentValue}, Index: ${index}, Array: ${array}`
  )
  return currentValue * currentValue
})

console.log(squaredNumbers) // [1, 4, 9, 16, 25]
```

**ğŸ“this**

ì½œë°± í•¨ìˆ˜ë„ í•¨ìˆ˜ì´ê¸° ë•Œë¬¸ì— ê¸°ë³¸ì ìœ¼ë¡œ thisê°€ ì „ì—­ê°ì²´ë¥¼ ì°¸ì¡°í•˜ì§€ë§Œ, ì œì–´ê¶Œì„ ë„˜ê²¨ë°›ì„ ì½”ë“œì—ì„œ ì½œë°± í•¨ìˆ˜ì— ë³„ë„ë¡œ thisê°€ ë  ëŒ€ìƒì„ ì§€ì •í•œ ê²½ìš°ì—ëŠ” ê·¸ ëŒ€ìƒì„ ì°¸ì¡°í•˜ê²Œ ëœë‹¤.

```jsx
console.log(this === window); // true (ì „ì—­ ì»¨í…ìŠ¤íŠ¸ì—ì„œ thisëŠ” window ê°ì²´ë¥¼ ê°€ë¦¬í‚´)

function sayHello() {
    console.log(`Hello, ${this.name}!`);
}

const person = {
    name: 'bori',
    greet: sayHello
};

sayHello(); // Hello, undefined! (thisëŠ” ì „ì—­ ê°ì²´(window)ë¥¼ ê°€ë¦¬í‚´)
person.greet(); // Hello, bori! (thisëŠ” person ê°ì²´ë¥¼ ê°€ë¦¬í‚´)

---

<button id="myButton">Click me</button>

document.getElementById('myButton').addEventListener('click', function() {
    console.log(this); // ì´ë²¤íŠ¸ê°€ ë°œìƒí•œ ìš”ì†Œ(<button id="myButton">)
    this.textContent = 'Clicked!'; // thisë¥¼ ì‚¬ìš©í•˜ì—¬ ìš”ì†Œì˜ í…ìŠ¤íŠ¸ë¥¼ ë³€ê²½
});
```

## 3. ì½œë°±í•¨ìˆ˜ëŠ” í•¨ìˆ˜

- ì½œë°± í•¨ìˆ˜ëŠ” í•¨ìˆ˜ë‹¤.
- ì½œë°± í•¨ìˆ˜ë¡œ ì–´ë–¤ ê°ì²´ì˜ ë§¤ì„œë“œë¥¼ ì „ë‹¬í•˜ë”ë¼ë„ ê·¸ ë©”ì„œë“œëŠ” ë©”ì„œë“œê°€ ì•„ë‹Œ í•¨ìˆ˜ë¡œì„œ í˜¸ì¶œëœë‹¤.

```jsx
var obj = {
  vals: [1, 2, 3],
  logValues: function (v, i) {
    console.log(this, v, i)
  },
}
obj.logValues(1, 2) // { vals: [1, 2, 3], logValues: f } 1 2
;[4, 5, 6].forEach(obj.logValues)
// Window { ... } 4 0
// Window { ... } 5 1
// Window { ... } 6 2
```

- thisëŠ” í˜¸ì¶œëœ ë©”ì„œë“œê°€ ì†í•œ ê°ì²´ì¸ objë¥¼ ê°€ë¦¬í‚´ â†’ `{ vals: [1, 2, 3], logValues: f } 1 2`
- forEach ë©”ì„œë“œëŠ” ì½œë°± í•¨ìˆ˜ ë‚´ì—ì„œ thisë¥¼ ì„¤ì •í•˜ì§€ ì•ŠëŠ”ë‹¤. ë‹¨ìˆœíˆ í•¨ìˆ˜ ìì²´ë¡œ ì „ë‹¬ë˜ê¸° ë•Œë¬¸ì— thisëŠ” ì „ì—­ ê°ì²´ê°€ ëœë‹¤.

## **4. ì½œë°± í•¨ìˆ˜ ë‚´ë¶€ì˜ thisì— ë‹¤ë¥¸ ê°’ ë°”ì¸ë”©í•˜ê¸°**

**ğŸ¤”ìœ„ì˜ í•´ê²° ë°©ë²•?!!**

1. **ì½œë°± í•¨ìˆ˜ ë‚´ë¶€ì˜ thisì— ë‹¤ë¥¸ ê°’ì„ ë°”ì¸ë”© í•˜ëŠ” ë°©ë²• - ì „í†µì ì¸ ë°©ì‹**

   ```jsx
   var obj1 = {
     name: 'obj1',
     func: function () {
       var self = this
       return function () {
         console.log(self.name)
       }
     },
   }
   var callback = obj1.func()
   setTimeout(callback, 1000)
   ```

2. **ì½œë°± í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ thisë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šì€ ê²½ìš°**

   ```jsx
   var obj1 = {
     name: 'obj1',
     func: function () {
       console.log(obj1.name)
     },
   }
   setTimeout(obj1.func, 1000)
   ```

3. **ì½œë°± í•¨ìˆ˜ ë‚´ë¶€ì˜ thisì— ë‹¤ë¥¸ ê°’ì„ ë°”ì¸ë”© í•˜ëŠ” ë°©ë²• - bind ë©”ì„œë“œ í™œìš© ğŸ‘ğŸ»ğŸ‘ğŸ»**

   ```jsx
   ;[4, 5, 6].forEach(obj.logValues.bind(obj))
   ```

   â†’ forEachì˜ ê° ì½œë°± í•¨ìˆ˜ì—ì„œ thisê°€ obj ê°ì²´ë¥¼ ê°€ë¦¬í‚¤ê²Œ ëœë‹¤!

## **5. ì½œë°± ì§€ì˜¥ê³¼Â ë¹„ë™ê¸°Â ì œì–´**

ì½œë°± ì§€ì˜¥: ì½œë°± í•¨ìˆ˜ë¥¼ ìµëª… í•¨ìˆ˜ë¡œ ì „ë‹¬í•˜ëŠ” ê³¼ì •ì´ ë°˜ë³µë˜ì–´ ì½”ë“œì˜ ë“¤ì—¬ì“°ê¸° ìˆ˜ì¤€ì´ ê°ë‹¹í•˜ê¸° í˜ë“¤ ì •ë„ë¡œ ê¹Šì–´ì§€ëŠ” í˜„ìƒ

> **â“ë™ê¸°**<br>
> í˜„ì¬ ì‹¤í–‰ ì¤‘ì¸ ì½”ë“œê°€ ì™„ë£Œëœ í›„ì—ì•¼ ë‹¤ìŒ ì½”ë“œë¥¼ ì‹¤í–‰í•˜ëŠ” ë°©ì‹<br><br>
> â“**ë¹„ë™ê¸°**<br>
> í˜„ì¬ ì‹¤í–‰ ì¤‘ì¸ ì½”ë“œì˜ ì™„ë£Œ ì—¬ë¶€ì™€ ë¬´ê´€í•˜ê²Œ ì¦‰ì‹œ ë‹¤ìŒ ì½”ë“œë¡œ ë„˜ì–´ê°

>

```jsx
setTimeout(
  function (name) {
    var coffeeList = name
    console.log(coffeeList)

    setTimeout(
      function (name) {
        coffeeList += ', ' + name
        console.log(coffeeList)

        setTimeout(
          function (name) {
            coffeeList += ', ' + name
            console.log(coffeeList)

            setTimeout(
              function (name) {
                coffeeList += ', ' + name
                console.log(coffeeList)
              },
              500,
              'ì¹´í˜ë¼ë–¼'
            )
          },
          500,
          'ì¹´í˜ëª¨ì¹´'
        )
      },
      500,
      'ì•„ë©”ë¦¬ì¹´ë…¸'
    )
  },
  500,
  'ì—ìŠ¤í”„ë ˆì†Œ'
)
```

**ğŸ¤”ìœ„ì˜ í•´ê²° ë°©ë²•?!!**

1. **ê¸°ëª… í•¨ìˆ˜ë¡œ ë³€í™˜**

   ```jsx
   var coffeeList = ''

   var addEspresso = function (name) {
     coffeeList = name
     console.log(coffeeList)
     setTimeout(addAmericano, 500, 'ì•„ë©”ë¦¬ì¹´ë…¸')
   }
   var addAmericano = function (name) {
     coffeeList += ', ' + name
     console.log(coffeeList)
     setTimeout(addMocha, 500, 'ì¹´í˜ëª¨ì¹´')
   }
   var addMocha = function (name) {
     coffeeList += ', ' + name
     console.log(coffeeList)
     setTimeout(addLatte, 500, 'ì¹´í˜ë¼ë–¼')
   }
   var addLatte = function (name) {
     coffeeList += ', ' + name
     console.log(coffeeList)
   }

   setTimeout(addEspresso, 500, 'ì—ìŠ¤í”„ë ˆì†Œ')
   ```

ì´ ë°©ì‹ì€ ì½”ë“œì˜ ê°€ë…ì„±ì„ ë†’ì¼ë¿ ì•„ë‹ˆë¼ í•¨ìˆ˜ ì„ ì–¸ê³¼ í•¨ìˆ˜ í˜¸ì¶œë§Œ êµ¬ë¶„í•  ìˆ˜ ìˆë‹¤ë©´ ìœ„ì—ì„œë¶€í„° ì•„ë˜ë¡œ ìˆœì„œëŒ€ë¡œ ì½ëŠ” ê²ƒë„ ì‰½ë‹¤. í•˜ì§€ë§Œ ì¼íšŒì„± í•¨ìˆ˜ì— ì „ë¶€ ë³€ìˆ˜ë¥¼ í• ë‹¹í•˜ëŠ” ê²ƒì€ ë²ˆê±°ë¡­ê²Œ ëŠê»´ì§„ë‹¤.

1. **Promise**

   ```jsx
   new Promise(function (resolve) {
     setTimeout(function () {
       var name = 'ì—ìŠ¤í”„ë ˆì†Œ'
       console.log(name)
       resolve(name)
     }, 500)
   })
     .then(function (prevName) {
       return new Promise(function (resolve) {
         setTimeout(function () {
           var name = prevName + ', ì•„ë©”ë¦¬ì¹´ë…¸'
           console.log(name)
           resolve(name)
         }, 500)
       })
     })
     .then(function (prevName) {
       return new Promise(function (resolve) {
         setTimeout(function () {
           var name = prevName + ', ì¹´í˜ëª¨ì¹´'
           console.log(name)
           resolve(name)
         }, 500)
       })
     })
     .then(function (prevName) {
       return new Promise(function (resolve) {
         setTimeout(function () {
           var name = prevName + ', ì¹´í˜ë¼ë–¼'
           console.log(name)
           resolve(name)
         }, 500)
       })
     })
   ```

   new ì—°ì‚°ìì™€ í•¨ê»˜ í˜¸ì¶œí•œ Promiseì˜ ì¸ìë¡œ ë„˜ê²¨ì£¼ëŠ” ì½œë°± í•¨ìˆ˜ëŠ” í˜¸ì¶œí•  ë•Œ ë°”ë¡œ ì‹¤í–‰ë˜ì§€ë§Œ ê·¸ ë‚´ë¶€ì— resolve ë˜ëŠ” reject í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ëŠ” êµ¬ë¬¸ì´ ìˆì„ ê²½ìš° ë‘˜ ì¤‘ í•˜ë‚˜ê°€ ì‹¤í–‰ë˜ê¸° ì „ê¹Œì§€ëŠ” ë‹¤ìŒ(then) ë˜ëŠ” ì˜¤ë¥˜ êµ¬ë¬¸(catch)ìœ¼ë¡œ ë„˜ì–´ê°€ì§€ ì•ŠëŠ”ë‹¤.

2. **Generator**

   ```jsx
   var addCoffee = function (prevName, name) {
     setTimeout(function () {
       coffeeMaker.next(prevName ? prevName + ', ' + name : name)
     }, 500)
   }
   var coffeeGenerator = function* () {
     var espresso = yield addCoffee('', 'ì—ìŠ¤í”„ë ˆì†Œ')
     console.log(espresso)
     var americano = yield addCoffee(espresso, 'ì•„ë©”ë¦¬ì¹´ë…¸')
     console.log(americano)
     var mocha = yield addCoffee(americano, 'ì¹´í˜ëª¨ì¹´')
     console.log(mocha)
     var latte = yield addCoffee(mocha, 'ì¹´í˜ë¼ë–¼')
     console.log(latte)
   }
   var coffeeMaker = coffeeGenerator()
   coffeeMaker.next()
   ```

   - â€˜\*â€™ì´ ë¶™ì€ í•¨ìˆ˜ê°€ ë°”ë¡œ Generator í•¨ìˆ˜
   - `yield` í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ë¹„ë™ê¸° ì‘ì—…ì„ ê¸°ë‹¤ë¦¬ê³ , `setTimeout`ì„ í†µí•´ ì»¤í”¼ ì´ë¦„ì„ ìˆœì°¨ì ìœ¼ë¡œ ì¶”ê°€í•œë‹¤.

3. **Promise + async/await**

   ```jsx
   var addCoffee = function (name) {
     return new Promise(function (resolve) {
       setTimeout(function () {
         resolve(name)
       }, 500)
     })
   }
   var coffeeMaker = async function () {
     var coffeeList = ''
     var _addCoffee = async function (name) {
       coffeeList += (coffeeList ? ',' : '') + (await addCoffee(name))
     }
     await _addCoffee('ì—ìŠ¤í”„ë ˆì†Œ')
     console.log(coffeeList)
     await _addCoffee('ì•„ë©”ë¦¬ì¹´ë…¸')
     console.log(coffeeList)
     await _addCoffee('ì¹´í˜ëª¨ì¹´')
     console.log(coffeeList)
     await _addCoffee('ì¹´í˜ë¼ë–¼')
     console.log(coffeeList)
   }
   coffeeMaker()
   ```

   í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ ì‹¤ì§ˆì ì¸ ë¹„ë™ê¸° ì‘ì—…ì´ í•„ìš”í•œ ìœ„ì¹˜ë§ˆë‹¤ awaitë¥¼ í‘œê¸°í•˜ëŠ” ê²ƒë§Œìœ¼ë¡œ ë’¤ì˜ ë‚´ìš©ì„ Promiseë¡œ ìë™ ì „í™˜í•˜ê³ , í•´ë‹¹ ë‚´ìš©ì´ resolveëœ ì´í›„ì—ì•¼ ë‹¤ìŒìœ¼ë¡œ ì§„í–‰í•œë‹¤. (Promiseì˜ thenê³¼ í¡ì‚¬í•œ íš¨ê³¼..)
